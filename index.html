<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DZSTORE OFICIAL</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card fade-in">

  <h1>DZSTORE OFICIAL</h1>
  <p class="subtitle">Game Cheats Â· Ventas digitales Â· Seguro</p>

  <!-- SERVICIOS -->
  <div class="services">
    <h2>Servicios</h2>

    <div class="service">
      <span>DRIP NO ROOT â€“ 1 dÃ­a</span>
      <strong>3 USD</strong>
      <button onclick="addToCart('DRIP NO ROOT â€“ 1 dÃ­a', 3)">Comprar</button>
    </div>

    <div class="service">
      <span>DRIP NO ROOT â€“ 7 dÃ­as</span>
      <strong>5 USD</strong>
      <button onclick="addToCart('DRIP NO ROOT â€“ 7 dÃ­as', 5)">Comprar</button>
    </div>

    <div class="service">
      <span>DRIP NO ROOT â€“ 15 dÃ­as</span>
      <strong>8 USD</strong>
      <button onclick="addToCart('DRIP NO ROOT â€“ 15 dÃ­as', 8)">Comprar</button>
    </div>
  </div>

  <!-- PAÃS / MONEDA -->
  <div class="currency">
    <h2>ğŸŒ Tu paÃ­s</h2>
    <select id="currency" onchange="updateCurrency()">
      <option value="USD">Estados Unidos (USD)</option>
      <option value="COP">Colombia (COP)</option>
      <option value="MXN">MÃ©xico (MXN)</option>
      <option value="ARS">Argentina (ARS)</option>
      <option value="CLP">Chile (CLP)</option>
      <option value="PEN">PerÃº (PEN)</option>
    </select>
  </div>

  <!-- VENDEDOR -->
  <div class="seller">
    <h2>ğŸ‘¤ Elige un vendedor</h2>
    <select id="seller">
      <option value="">Selecciona un vendedor</option>
      <option value="diogo">Dz Diogo</option>
      <option value="ozoria">Dz Ozoria</option>
      <option value="david">David</option>
    </select>
  </div>

  <!-- CARRITO -->
  <div class="cart">
    <h2>ğŸ›’ Carrito (<span id="count">0</span>)</h2>
    <ul id="cartItems"></ul>

    <p class="total">
      Total: <span id="totalLocal">0</span>
      <span id="currencyLabel">USD</span>
    </p>
    <p class="usd">
      (Equivalente: <span id="totalUSD">0</span> USD)
    </p>
  </div>

  <a class="btn whatsapp" onclick="sendWhatsApp()">
    ğŸ“² Finalizar pedido
  </a>

  <span class="footer">Â© 2026 DZSTORE OFICIAL</span>
</div>

<script>
  /* ===== CONFIGURACIÃ“N ===== */
  const rates = {
    USD: 1,
    COP: 4000,
    MXN: 17,
    ARS: 900,
    CLP: 950,
    PEN: 3.7
  };

  const sellers = {
    diogo: { name: "Dz Diogo", phone: "18293185425" },
    ozoria: { name: "Dz Ozoria", phone: "18093185425" },
    david: { name: "David", phone: "584262984228" }
  };

  let currentCurrency = "USD";
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  renderCart();

  /* ===== CARRITO ===== */
  function addToCart(product, price) {
    cart.push({ product, price });
    saveCart();
    renderCart();
  }

  function removeItem(index) {
    cart.splice(index, 1);
    saveCart();
    renderCart();
  }

  function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  function updateCurrency() {
    currentCurrency = document.getElementById("currency").value;
    renderCart();
  }

  function generateOrderCode() {
    return "DZ-" + Math.floor(10000 + Math.random() * 90000);
  }

  function renderCart() {
    const list = document.getElementById("cartItems");
    const totalLocal = document.getElementById("totalLocal");
    const totalUSD = document.getElementById("totalUSD");
    const currencyLabel = document.getElementById("currencyLabel");
    const countSpan = document.getElementById("count");

    list.innerHTML = "";
    let total = 0;

    cart.forEach((item, i) => {
      total += item.price;
      const li = document.createElement("li");
      li.innerHTML = `
        ${item.product} - ${item.price} USD
        <button onclick="removeItem(${i})">âŒ</button>
      `;
      list.appendChild(li);
    });

    const converted = total * rates[currentCurrency];

    totalUSD.textContent = total.toFixed(2);
    totalLocal.textContent = converted.toLocaleString();
    currencyLabel.textContent = currentCurrency;
    countSpan.textContent = cart.length;
  }

  /* ===== WHATSAPP ===== */
  function sendWhatsApp() {
    if (cart.length === 0) {
      alert("El carrito estÃ¡ vacÃ­o");
      return;
    }

    const sellerKey = document.getElementById("seller").value;
    if (!sellerKey) {
      alert("Selecciona un vendedor");
      return;
    }

    const seller = sellers[sellerKey];
    const orderCode = generateOrderCode();
    let total = 0;

    let msg = `ğŸ§¾ *TICKET DZSTORE OFICIAL*%0A`;
    msg += `Pedido: *${orderCode}*%0A`;
    msg += `Vendedor: *${seller.name}*%0A%0A`;

    cart.forEach((item, i) => {
      msg += `${i + 1}. ${item.product} - ${item.price} USD%0A`;
      total += item.price;
    });

    const localTotal = (total * rates[currentCurrency]).toLocaleString();

    msg += `%0AğŸŒ Moneda: ${currentCurrency}`;
    msg += `%0AğŸ’± Total local: ${localTotal} ${currentCurrency}`;
    msg += `%0AğŸ’µ Total USD: ${total} USD`;

    window.open(
      `https://wa.me/${seller.phone}?text=${msg}`,
      "_blank"
    );
  }
</script>

</body>
</html>
